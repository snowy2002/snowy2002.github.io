import{_ as e,c as a,G as n,b as p}from"./chunks/framework.BrC0DRXd.js";const i=JSON.parse('{"title":"pnpm的介绍与安装","description":"介绍 npm 与 pnpm 的作用和差异，梳理 pnpm 的优化点，并给出在不同系统上的安装方法。","frontmatter":{"title":"pnpm的介绍与安装","filename":"20251124-pnpm的介绍与安装","tags":["Javascript","Node.js","包管理","pnpm"],"categories":["前端技术"],"date":"2025-11-24T00:00:00.000Z","description":"介绍 npm 与 pnpm 的作用和差异，梳理 pnpm 的优化点，并给出在不同系统上的安装方法。","articleGPT":"本文对比 npm 与 pnpm 的工作方式和优势，解释 pnpm 如何通过内容寻址存储与严格 node_modules 结构带来性能和一致性提升，并给出 macOS、Windows、Linux 的安装步骤与常用命令。","top":null,"share":true,"delete":false,"head":[["link",{"rel":"canonical","href":"https://snowy2002.github.io/posts/2025-11/pnpm的介绍与安装"}]]},"headers":[],"relativePath":"posts/2025-11/pnpm的介绍与安装.md","filePath":"posts/2025-11/pnpm的介绍与安装.md","lastUpdated":1763975404000}');const l=e({name:"posts/2025-11/pnpm的介绍与安装.md"},[["render",function(e,i,l,s,o,t){return p(),a("div",null,i[0]||(i[0]=[n('<h2 id="npm-与-pnpm-的作用" tabindex="-1">npm 与 pnpm 的作用 <a class="header-anchor" href="#npm-与-pnpm-的作用" aria-label="Permalink to &quot;npm 与 pnpm 的作用&quot;">​</a></h2><ul><li>它们都是 Node.js 生态的包管理器，用来安装、更新、发布依赖，并维护 <code>package.json</code> 与锁文件。</li><li>npm 是 Node 官方自带的默认工具；pnpm 是兼容 npm 语法的替代方案，主打更快安装、更少磁盘占用与更严格的依赖解析。</li></ul><h2 id="pnpm-相比-npm-的主要优化" tabindex="-1">pnpm 相比 npm 的主要优化 <a class="header-anchor" href="#pnpm-相比-npm-的主要优化" aria-label="Permalink to &quot;pnpm 相比 npm 的主要优化&quot;">​</a></h2><ul><li><strong>内容寻址的全局 store</strong>：相同版本的包只在全局 store 下载一次，再通过硬链接/符号链接到项目，显著减少磁盘占用。</li><li><strong>严格的 <code>node_modules</code> 结构</strong>：pnpm 不把所有依赖平铺，避免“幽灵依赖”（未声明却能被 require）；依赖关系更符合规范。</li><li><strong>安装速度更快</strong>：并行下载 + 复用缓存；重复安装、CI 场景受益明显。</li><li><strong>Workspaces/Monorepo 友好</strong>：内置工作区支持，跨包依赖用软链接直连源代码，调试发布都更顺畅。</li><li><strong>锁文件稳定</strong>：<code>pnpm-lock.yaml</code> 记录精确来源，配合严格解析能减少“本地好、线上挂”的差异。</li></ul><p><a class="img-fancybox" href="/images/posts/2025-11/1.png" data-fancybox="gallery" data-caption="pnpm 优势示意"><img class="post-img" src="/images/posts/2025-11/1.png" alt="pnpm 优势示意" loading="lazy"><span class="post-img-tip">pnpm 优势示意</span></a></p><h2 id="npm-vs-pnpm-快速对比" tabindex="-1">npm vs pnpm 快速对比 <a class="header-anchor" href="#npm-vs-pnpm-快速对比" aria-label="Permalink to &quot;npm vs pnpm 快速对比&quot;">​</a></h2><ul><li>磁盘占用：pnpm &lt; npm（多项目共享同一版本的缓存）。</li><li>安装速度：pnpm 通常更快，尤其是重复安装或大仓库。</li><li>依赖隔离：pnpm 更严格，能及早暴露未声明依赖。</li><li>语法兼容：常用命令基本一致（<code>install/add/remove/run</code> 等），切换成本低。</li></ul><h2 id="在不同系统上安装-pnpm" tabindex="-1">在不同系统上安装 pnpm <a class="header-anchor" href="#在不同系统上安装-pnpm" aria-label="Permalink to &quot;在不同系统上安装 pnpm&quot;">​</a></h2><p>前提：已安装 Node.js（建议 LTS/≥16.13 以使用 corepack；多数项目推荐 Node 18/20）。</p><h3 id="通用-corepack-推荐" tabindex="-1">通用：Corepack（推荐） <a class="header-anchor" href="#通用-corepack-推荐" aria-label="Permalink to &quot;通用：Corepack（推荐）&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  # 让 Node 自带的 corepack 管理包管理器</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prepare</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm@latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --activate</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="macos" tabindex="-1">macOS <a class="header-anchor" href="#macos" aria-label="Permalink to &quot;macOS&quot;">​</a></h3><ul><li>Homebrew：<code>brew install pnpm</code></li><li>npm 全局：<code>npm install -g pnpm</code></li></ul><h3 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h3><ul><li>winget：<code>winget install pnpm.pnpm</code></li><li>Scoop：<code>scoop install pnpm</code></li><li>Chocolatey：<code>choco install pnpm</code></li><li>已装 Node 时也可用 corepack 方法。</li></ul><h3 id="linux" tabindex="-1">Linux <a class="header-anchor" href="#linux" aria-label="Permalink to &quot;Linux&quot;">​</a></h3><ul><li>corepack：同上（适合已装官方 Node）。</li><li>npm 全局：<code>npm install -g pnpm</code></li><li>官方安装脚本：<code>curl -fsSL https://get.pnpm.io/install.sh | sh -</code>（需要网络与执行权限）。</li></ul><h2 id="常用命令速览" tabindex="-1">常用命令速览 <a class="header-anchor" href="#常用命令速览" aria-label="Permalink to &quot;常用命令速览&quot;">​</a></h2><ul><li>初始化：<code>pnpm init</code></li><li>安装依赖：<code>pnpm install</code></li><li>安装/删除单个包：<code>pnpm add react</code>，<code>pnpm add -D typescript</code>，<code>pnpm remove lodash</code></li><li>运行脚本：<code>pnpm run build</code>，<code>pnpm test</code></li><li>工作区（monorepo）：<code>pnpm install --filter 包名</code>，<code>pnpm run build --filter 包名</code></li><li>清理缓存：<code>pnpm store prune</code></li></ul><h2 id="迁移与使用提示" tabindex="-1">迁移与使用提示 <a class="header-anchor" href="#迁移与使用提示" aria-label="Permalink to &quot;迁移与使用提示&quot;">​</a></h2><ul><li>直接替换命令：将原先的 <code>npm install</code>、<code>npm run</code> 换为 <code>pnpm install</code>、<code>pnpm run</code>，保持 <code>package.json</code> 不变。</li><li>关注“幽灵依赖”报错：如发现依赖缺失，显式写入 <code>dependencies</code>/<code>devDependencies</code> 后再安装。</li><li>CI 缓存：缓存 <code>~/.pnpm-store</code>（或 pnpm 指定的 store 路径）可进一步加速。</li></ul>',21)]))}]]);export{i as __pageData,l as default};
