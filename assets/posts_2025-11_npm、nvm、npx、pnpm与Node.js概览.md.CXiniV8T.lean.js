import{_ as s,c as i,G as a,b as n}from"./chunks/framework.BrC0DRXd.js";const e=JSON.parse('{"title":"npm、nvm、npx、pnpm 与 Node.js 概览","description":"介绍 Node.js 运行时，以及 npm、nvm、npx、pnpm 的作用、区别与常见用法。","frontmatter":{"title":"npm、nvm、npx、pnpm 与 Node.js 概览","filename":"20251124-npm-nvm-npx-pnpm-nodejs","tags":["Javascript","Node.js","包管理","前端工程化"],"categories":["前端技术"],"date":"2025-11-24T00:00:00.000Z","description":"介绍 Node.js 运行时，以及 npm、nvm、npx、pnpm 的作用、区别与常见用法。","articleGPT":"本文梳理 Node.js、npm、nvm、npx 与 pnpm 的定位和常用场景，解释包管理器的差异、版本管理思路及常见命令，帮助在本地和 CI 中选择合适的工具链。","top":null,"share":true,"delete":false,"head":[["link",{"rel":"canonical","href":"https://snowy2002.github.io/posts/2025-11/npm、nvm、npx、pnpm与Node.js概览"}]]},"headers":[],"relativePath":"posts/2025-11/npm、nvm、npx、pnpm与Node.js概览.md","filePath":"posts/2025-11/npm、nvm、npx、pnpm与Node.js概览.md","lastUpdated":1763975404000}');const p=s({name:"posts/2025-11/npm、nvm、npx、pnpm与Node.js概览.md"},[["render",function(s,e,p,l,t,h){return n(),i("div",null,e[0]||(e[0]=[a('<h2 id="核心概念" tabindex="-1">核心概念 <a class="header-anchor" href="#核心概念" aria-label="Permalink to &quot;核心概念&quot;">​</a></h2><ul><li><strong>Node.js</strong>：运行时，提供 JavaScript 在服务器/本地的执行环境（含内置模块、事件循环）。版本差异会影响语法特性、标准库与安全修复。</li><li><strong>npm</strong>：Node 官方默认包管理器，随 Node 安装；负责安装/发布依赖、维护 <code>package.json</code> 和 <code>package-lock.json</code>。</li><li><strong>nvm</strong>：Node 版本管理器，允许在同机快速切换/安装多个 Node 版本（常用于兼容不同项目的要求）。</li><li><strong>npx</strong>：npm 自带的“临时执行器”，用于运行项目依赖或远端包的可执行脚本，无需全局安装。</li><li><strong>pnpm</strong>：兼容 npm 语法的替代包管理器，特点是硬链接+内容寻址的全局缓存、更严格的依赖解析、更快的重复安装。</li></ul><h2 id="工具定位与区别" tabindex="-1">工具定位与区别 <a class="header-anchor" href="#工具定位与区别" aria-label="Permalink to &quot;工具定位与区别&quot;">​</a></h2><ul><li>版本管理：nvm 管 Node 版本；npm/pnpm 管项目依赖；npx 负责临时执行包；Node.js 是底层运行时。</li><li>包安装结构： <ul><li>npm：平铺 <code>node_modules</code>，可能出现“幽灵依赖”（未声明但可被 require）。</li><li>pnpm：使用全局 store + 链接结构，依赖树更严格，不声明就不可用，磁盘占用和二次安装速度更优。</li></ul></li><li>锁文件：npm 用 <code>package-lock.json</code>，pnpm 用 <code>pnpm-lock.yaml</code>，两者作用相同但格式/解析策略不同。</li><li>兼容性：常见命令基本一致（install/add、run、remove、update 等），pnpm 支持 workspaces 原生体验更好。</li></ul><h2 id="常见安装与基础命令" tabindex="-1">常见安装与基础命令 <a class="header-anchor" href="#常见安装与基础命令" aria-label="Permalink to &quot;常见安装与基础命令&quot;">​</a></h2><h3 id="安装-node-js" tabindex="-1">安装 Node.js <a class="header-anchor" href="#安装-node-js" aria-label="Permalink to &quot;安装 Node.js&quot;">​</a></h3><ul><li>官方安装包（macOS/Windows）或发行版包管理器（Linux）。</li><li>需要多版本切换：安装 nvm，再执行 <code>nvm install 20 &amp;&amp; nvm use 20</code>。</li></ul><h3 id="npm-基本用法" tabindex="-1">npm 基本用法 <a class="header-anchor" href="#npm-基本用法" aria-label="Permalink to &quot;npm 基本用法&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 安装依赖</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 安装开发依赖</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 运行 scripts 中的 dev</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> publish</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 发布包（需登录）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="npx-执行" tabindex="-1">npx 执行 <a class="header-anchor" href="#npx-执行" aria-label="Permalink to &quot;npx 执行&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create-vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 直接运行远端包</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eslint</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # 运行项目内的可执行文件</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="pnpm-基本用法" tabindex="-1">pnpm 基本用法 <a class="header-anchor" href="#pnpm-基本用法" aria-label="Permalink to &quot;pnpm 基本用法&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # 安装依赖并生成 pnpm-lock.yaml</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> react</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # 安装生产依赖</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> typescript</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 安装开发依赖</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lodash</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # 移除依赖</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # 运行脚本</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="工作区-monorepo-pnpm-示意" tabindex="-1">工作区/Monorepo（pnpm 示意） <a class="header-anchor" href="#工作区-monorepo-pnpm-示意" aria-label="Permalink to &quot;工作区/Monorepo（pnpm 示意）&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package-a</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 仅安装指定子包依赖</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package-b</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 在子包内执行脚本</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="选择建议" tabindex="-1">选择建议 <a class="header-anchor" href="#选择建议" aria-label="Permalink to &quot;选择建议&quot;">​</a></h2><ul><li>需要快速上手且依赖简单：直接使用随 Node 搭载的 npm。</li><li>需要在同机处理多个 Node 版本：用 nvm 管理 Node，再选择 npm 或 pnpm。</li><li>关注重复安装速度、磁盘占用、依赖严格性、工作区体验：优先 pnpm。</li><li>临时执行脚本或脚手架：用 npx，避免全局安装。</li><li>CI 缓存：npm 缓存 <code>~/.npm</code>；pnpm 缓存 <code>~/.pnpm-store</code>，缓存命中可显著加速。</li></ul><h2 id="常见问题与排查" tabindex="-1">常见问题与排查 <a class="header-anchor" href="#常见问题与排查" aria-label="Permalink to &quot;常见问题与排查&quot;">​</a></h2><ul><li>版本冲突：用 <code>node -v</code>、<code>npm -v</code>、<code>pnpm -v</code> 确认版本；使用 nvm 明确指定 Node。</li><li>“依赖未找到”：pnpm 严格检查声明，补充到 <code>dependencies</code>/<code>devDependencies</code> 后再安装。</li><li>全局包失效：确认 <code>npm config get prefix</code> 或 nvm 的 shim 路径已在 <code>PATH</code> 中。</li></ul>',19)]))}]]);export{e as __pageData,p as default};
