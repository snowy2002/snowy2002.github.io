---  
title: 并行理论
filename: 2025092315-并行理论
tags:
  - course
categories:  
  - 课程笔记  
date: 2025-09-23
description: 并行理论课程笔记
articleGPT: 
top:   
share: true
delete: false
---  

我来用数学公式格式重写这些表达式：  
这些是CCS（Calculus of Communicating Systems）或类似进程代数的公式，其中：
- $|$ 表示并行组合
- $\backslash$ 表示限制操作
- $.$ 表示前缀操作
- $+$ 表示选择操作
- $\tau$ 表示内部/沉默动作
- $\overline{a}$ 表示动作 $a$ 的对偶
- $[f]$ 表示重命名操作

### 第一个公式
$((a.E+b.0)|\overline{a}.F)\backslash a \xrightarrow{\tau} (E|F)\backslash a$

### 公式分析

#### 符号含义

- $a.E$：执行动作 $a$ 后变成进程 $E$
- $b.0$：执行动作 $b$ 后变成空进程（终止）
- $\overline{a}$：动作 $a$ 的**对偶动作**（互补动作）
- $|$：**并行组合**操作符
- $\backslash a$：**限制操作符**，禁止动作 $a$ 和 $\overline{a}$ 与外界通信
- $\xrightarrow{\tau}$：**内部转换**（沉默动作）

#### 转换过程解释

1. **初始状态**：$((a.E+b.0)|\overline{a}.F)\backslash a$
   - 左侧进程：$a.E+b.0$ 可以选择执行 $a$ 或 $b$
   - 右侧进程：$\overline{a}.F$ 准备执行 $\overline{a}$
   - 限制：禁止 $a$ 和 $\overline{a}$ 与外界通信

2. **关键机制**：**同步通信**
   - 由于限制操作 $\backslash a$，动作 $a$ 和 $\overline{a}$ 不能单独执行
   - 但它们可以**同步执行**，形成内部通信
   - $a$ 和 $\overline{a}$ 的同步产生 $\tau$ 动作

3. **转换结果**：$(E|F)\backslash a$
   - 左侧进程变成 $E$（执行了 $a$ 后的状态）
   - 右侧进程变成 $F$（执行了 $\overline{a}$ 后的状态）
   - 限制操作仍然保持

#### 应用的CCS规则

这个转换应用了以下CCS规则：
1. **通信规则**：$a$ 和 $\overline{a}$ 可以同步
2. **限制规则**：限制操作强制内部通信
3. **$\tau$ 生成**：同步通信产生内部动作 $\tau$

这展示了CCS中**受限并行**如何强制进程间的同步通信。

---

### 第二个问题
$A \stackrel{\text{def}}{=} a.A+\tau.b.A$. Show that $A \xrightarrow{\tau} b.A$

### 第三个定义和问题
$A \stackrel{\text{def}}{=} a.A'$, $A' \stackrel{\text{def}}{=} c.A$; $B \stackrel{\text{def}}{=} c.B'$, $B' \stackrel{\text{def}}{=} b.B$

Show that $(A|B)\backslash\{c\} \xrightarrow{a} (A'|B)\backslash\{c\} \xrightarrow{\tau} (A|B')\backslash\{c\}$

### 第四个定义
$A \stackrel{\text{def}}{=} a.A+\tau.b.A$, $A[f]$, where $f$ maps $a$ onto $b$

---

# Examples - Dining Philosophers Problem

## 问题描述
- **Two philosophers**: eating or thinking
- **two chopsticks**: idle or busy

## CCS定义

### 哲学家状态定义
$$\begin{align}
\text{PhilosopherThinking} &\stackrel{\text{def}}{=} \text{TakeChopstick}.\text{P1} \\[0.5em]
\text{P1} &\stackrel{\text{def}}{=} \text{TakeChopstick}.\text{PhilosopherEating} \\[0.5em]
\text{PhilosopherEating} &\stackrel{\text{def}}{=} \text{LaydownChopstick}.\text{P2} \\[0.5em]
\text{P2} &\stackrel{\text{def}}{=} \text{LaydownChopstick}.\text{PhilosopherThinking}
\end{align}$$

### 筷子状态定义
$$\begin{align}
\text{IdleChopstick} &\stackrel{\text{def}}{=} \text{TakeChopstick}.\text{BusyChopstick} \\[0.5em]
\text{BusyChopstick} &\stackrel{\text{def}}{=} \text{LaydownChopstick}.\text{IdleChopstick}
\end{align}$$

### 系统定义
$$\begin{align}
\text{System} &= (\text{PhilosopherThinking} \mid \text{PhilosopherThinking} \mid \text{IdleChopstick} \mid \text{IdleChopstick}) \setminus L \\[0.5em]
\text{where } L &= \{\text{TakeChopstick}, \text{LaydownChopstick}\}
\end{align}$$

## 推导树 (Derivation Tree)

### 哲学家状态转换推导树

```
PhilosopherThinking
        |
        | TakeChopstick
        ↓
       P1
        |
        | TakeChopstick  
        ↓
PhilosopherEating
        |
        | LaydownChopstick
        ↓
       P2
        |
        | LaydownChopstick
        ↓
PhilosopherThinking
        |
       ...
```

### 筷子状态转换推导树

```
IdleChopstick
      |
      | TakeChopstick
      ↓
BusyChopstick
      |
      | LaydownChopstick
      ↓
IdleChopstick
      |
     ...
```

### 系统交互推导树

```
(PhilosopherThinking | PhilosopherThinking | IdleChopstick | IdleChopstick)
                                |
                                | τ (内部同步: TakeChopstick)
                                ↓
        (P1 | PhilosopherThinking | BusyChopstick | IdleChopstick)
                                |
                                | τ (内部同步: TakeChopstick)
                                ↓
            (P1 | P2 | BusyChopstick | BusyChopstick) (死锁)
                                |
                               ...
```

## 状态转换图

### 哲学家状态机
```
     TakeChopstick      TakeChopstick
Thinking --------→ P1 --------→ Eating
    ↑                              ↓
    |                              | LaydownChopstick
    |          LaydownChopstick    ↓
    ←-------- P2 ←-----------------|
```

### 筷子状态机
```
         TakeChopstick
Idle -------------------→ Busy
 ↑                         ↓
 |                         |
 |      LaydownChopstick   |
 ←-------------------------
```

## 系统行为分析

该系统展示了：
- **同步通信**：通过共享动作 `TakeChopstick` 和 `LaydownChopstick`
- **资源竞争**：两个哲学家竞争有限的筷子资源
- **状态转换**：每个组件都有明确的状态转换序列
- **并发行为**：多个进程并行执行并通过同步进行协调