---  
title: 使用MongoDB和Netlify部署Twikoo博客评论系统的详细教程
filename: 2025091120  
tags:
  - Database
  - Development 
categories:  
  - 技术分享  
date: 2025-09-10  
description: 详细介绍如何使用MongoDB Atlas作为数据库，结合Netlify部署Twikoo评论系统，实现博客免费、高效的评论功能
articleGPT: |
  1. 本文详细介绍了使用MongoDB Atlas和Netlify部署Twikoo评论系统的完整流程   
  2. 首先需要在MongoDB Atlas创建免费集群，配置数据库用户和网络访问权限      
  3. 然后通过GitHub和Netlify部署Twikoo云函数，设置环境变量连接MongoDB   
  4. 最后在博客前端通过CDN引入或本地安装方式集成Twikoo评论系统   
  5. 整个部署过程无需服务器，完全免费，适合个人博客使用   
top:   
share: true
delete: false
---  
# 使用MongoDB和Netlify部署Twikoo博客评论系统的详细教程

在博客系统中，评论功能是与读者互动的重要组成部分。Twikoo作为一个简洁、安全的评论系统，非常适合个人博客使用。本文将详细介绍如何使用MongoDB Atlas作为数据库，结合Netlify部署Twikoo评论系统。

## 目录

1. [前期准备](#前期准备)
2. [MongoDB Atlas设置](#mongodb-atlas设置)
3. [Netlify部署](#netlify部署)
4. [前端配置](#前端配置)
5. [本地安装与CDN引入对比](#本地安装与cdn引入对比)
6. [常见问题排查](#常见问题排查)

## 前期准备

在开始之前，您需要准备：

- GitHub账号
- Netlify账号（可使用GitHub账号直接登录）
- MongoDB Atlas账号（免费）
- 一个已经搭建好的博客网站

## MongoDB Atlas设置

MongoDB Atlas是MongoDB提供的云数据库服务，提供免费套餐足够支持个人博客评论系统使用。

### 1. 注册并创建集群

1. 访问[MongoDB Atlas官网](https://www.mongodb.com/cloud/atlas)，注册账号
2. 登录后，点击"Create"创建新的集群
![MongoDB Atlas创建集群](https://pic1.zhimg.com/v2-357b79b076196e3617fa06abdcb022e0_1440w.jpg)

3. 选择"FREE"套餐（Shared Clusters）
4. 选择云服务提供商和区域（建议选择距离您用户最近的区域）
5. 点击"Create Cluster"创建集群
![MongoDB创建集群](https://picx.zhimg.com/v2-6442ecfeef9bc28dec0e8c5e237e67ef_1440w.jpg)

### 2. 配置用户名和密码，获取连接字符串

1. 在集群页面，点击"Connect"
![Connect](https://pic1.zhimg.com/v2-da52f9895ca8205299581aeff19e9e5c_1440w.jpg)

2. 设置用户名和密码（请使用复杂密码并记录下来）
![添加数据库用户](https://pic1.zhimg.com/v2-9c32e337d855e21cecd289d91b63419a_1440w.jpg)

3. 连接方式选择Drivers
![选择Drivers连接方式](https://pic3.zhimg.com/v2-a02c2ae1d3757e96088534f14185d5ea_1440w.jpg)

4. 记录数据库连接字符串，请将连接字符串中的 `<username>:<password>` 修改为刚刚创建的数据库 `<用户名>:<密码>`，并且保存好这个连接字符串
![记录数据库连接字符串](https://pica.zhimg.com/v2-26b8028d54173d1e1912d2e8fc537d92_1440w.jpg)

- 再次注意：
- 要手动替换成您设置的密码 ; 填写密码时去掉两侧的尖括号
- 示例  `mongodb+srv://username:123456@xx.com`

### 3. 配置网络访问

1. 在左侧菜单选择"Network Access"
2. 点击"Add IP Address"
3. 为了简化部署，可以选择"Allow Access from Anywhere" (0.0.0.0/0)
4. 点击"Confirm"确认
![配置网络访问](/images/posts/2025-09/1120-3.png)

## Netlify部署

Netlify提供了免费的Serverless Functions服务，非常适合部署Twikoo评论系统。

**注意**

- Netlify 部署的环境需配合 1.4.0 以上版本的 twikoo.js 使用

- Netlify 免费等级（Functions Level 0）支持每月 125,000 请求次数和 100 小时函数计算时长

### 1. 准备部署文件

1. 申请并登录 [Netlify](https://app.netlify.com/) 账号，创建一个 `Team`

2. 打开 [twikoojs/twikoo-netlify](https://github.com/twikoojs/twikoo-netlify) 点击 `fork` 将仓库 fork 到自己的账号下

### 2. 部署到Netlify

1. 回到 Netlify，在 `Project` 中选择 `Add new project`
![新建项目](/images/posts/2025-09/1120-4.png)

2. 点击 Deploy with GitHub，如果未授权 GitHub 账号，先授权，然后选择前面 fork 的 twikoo-netlify 项目
![选择fork的Github项目](https://twikoo.js.org/assets/netlify-2.CoU6-6Qj.png)

3. 添加环境变量：`Key` 为`MONGODB_URI`，`Value` 输入前面记录的数据库连接字符串
![添加环境变量](https://twikoo.js.org/assets/netlify-3.BRAuDkNv.png)

4. 点击"Deploy twikoo-netlify"开始部署

### 3. 获取Twikoo环境ID

1. 部署完成后，在Netlify站点概览页面，记下您的网站URL（例如`https://your-site-name.netlify.app`）
2. Twikoo的环境ID为：`https://your-site-name.netlify.app/.netlify/functions/twikoo`
3. 进入 Projects overview，点击上方的链接
![Projects overview](/images/posts/2025-09/1120-5.png)  
如果环境配置正确，可以看到 “Twikoo 云函数运行正常” 的提示
![Twikoo 云函数运行正常](https://twikoo.js.org/assets/netlify-5.BSv5GDZV.png)

## 前端配置

现在，您需要在博客前端配置Twikoo评论系统。有两种方式可以引入Twikoo：通过CDN或本地安装。

### 使用CDN引入

在您的博客模板中添加以下代码：

```html
<!-- HTML结构 -->
<div id="twikoo"></div>

<!-- 引入Twikoo -->
<script src="https://cdn.staticfile.org/twikoo/1.6.44/twikoo.min.js"></script>

<!-- 初始化Twikoo -->
<script>
  twikoo.init({
    envId: 'https://your-site-name.netlify.app/.netlify/functions/twikoo', // 替换为您的环境ID
    el: '#twikoo'
  });
</script>
```